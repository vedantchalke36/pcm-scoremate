const percentileData = [
  { score: 200, percentile: 99.999 },
  { score: 199, percentile: 99.999 },
  { score: 198, percentile: 99.999 },
  { score: 197, percentile: 99.999 },
  { score: 196, percentile: 99.999 },
  { score: 195, percentile: 99.999 },
  { score: 194, percentile: 99.999 },
  { score: 193, percentile: 99.999 },
  { score: 192, percentile: 99.999 },
  { score: 191, percentile: 99.999 },
  { score: 190, percentile: 99.999 },
  { score: 189, percentile: 99.999 },
  { score: 188, percentile: 99.999 },
  { score: 187, percentile: 99.999 },
  { score: 186, percentile: 99.999 },
  { score: 185, percentile: 99.999 },
  { score: 184, percentile: 99.999 },
  { score: 183, percentile: 99.999 },
  { score: 182, percentile: 99.999 },
  { score: 181, percentile: 99.999 },
  { score: 180, percentile: 99.999 },
  { score: 179, percentile: 99.999 },
  { score: 178, percentile: 99.999 },
  { score: 177, percentile: 99.999 },
  { score: 176, percentile: 99.999 },
  { score: 175, percentile: 99.999 },
  { score: 174, percentile: 99.999 },
  { score: 173, percentile: 99.999 },
  { score: 172, percentile: 99.999 },
  { score: 171, percentile: 99.999 },
  { score: 170, percentile: 99.999 },
  { score: 169, percentile: 99.999 },
  { score: 168, percentile: 99.999 },
  { score: 167, percentile: 99.999 },
  { score: 166, percentile: 99.999 },
  { score: 165, percentile: 99.999 },
  { score: 164, percentile: 99.999 },
  { score: 163, percentile: 99.999 },
  { score: 162, percentile: 99.999 },
  { score: 161, percentile: 99.999 },
  { score: 160, percentile: 99.5 },
  { score: 159, percentile: 99.4 },
  { score: 158, percentile: 99.3 },
  { score: 157, percentile: 99.2 },
  { score: 156, percentile: 99.1 },
  { score: 155, percentile: 99.0 },
  { score: 154, percentile: 98.9 },
  { score: 153, percentile: 98.8 },
  { score: 152, percentile: 98.7 },
  { score: 151, percentile: 98.6 },
  { score: 150, percentile: 99.0 },
  { score: 149, percentile: 98.9 },
  { score: 148, percentile: 98.8 },
  { score: 147, percentile: 98.7 },
  { score: 146, percentile: 98.6 },
  { score: 145, percentile: 98.5 },
  { score: 144, percentile: 98.4 },
  { score: 143, percentile: 98.3 },
  { score: 142, percentile: 98.2 },
  { score: 141, percentile: 98.1 },
  { score: 140, percentile: 98.0 },
  { score: 139, percentile: 97.9 },
  { score: 138, percentile: 97.8 },
  { score: 137, percentile: 97.7 },
  { score: 136, percentile: 97.6 },
  { score: 135, percentile: 97.5 },
  { score: 134, percentile: 97.4 },
  { score: 133, percentile: 97.3 },
  { score: 132, percentile: 97.2 },
  { score: 131, percentile: 97.1 },
  { score: 130, percentile: 97.0 },
  { score: 129, percentile: 96.9 },
  { score: 128, percentile: 96.8 },
  { score: 127, percentile: 96.7 },
  { score: 126, percentile: 96.6 },
  { score: 125, percentile: 96.5 },
  { score: 124, percentile: 96.4 },
  { score: 123, percentile: 96.3 },
  { score: 122, percentile: 96.2 },
  { score: 121, percentile: 96.1 },
  { score: 120, percentile: 95.0 },
  { score: 119, percentile: 94.9 },
  { score: 118, percentile: 94.8 },
  { score: 117, percentile: 94.7 },
  { score: 116, percentile: 94.6 },
  { score: 115, percentile: 94.5 },
  { score: 114, percentile: 94.4 },
  { score: 113, percentile: 94.3 },
  { score: 112, percentile: 94.2 },
  { score: 111, percentile: 94.1 },
  { score: 110, percentile: 94.0 },
  { score: 109, percentile: 93.9 },
  { score: 108, percentile: 93.8 },
  { score: 107, percentile: 93.7 },
  { score: 106, percentile: 93.6 },
  { score: 105, percentile: 93.5 },
  { score: 104, percentile: 93.4 },
  { score: 103, percentile: 93.3 },
  { score: 102, percentile: 93.2 },
  { score: 101, percentile: 93.1 },
  { score: 100, percentile: 92.0 },
  { score: 99, percentile: 91.8 },
  { score: 98, percentile: 91.6 },
  { score: 97, percentile: 91.4 },
  { score: 96, percentile: 91.2 },
  { score: 95, percentile: 91.0 },
  { score: 94, percentile: 90.8 },
  { score: 93, percentile: 90.6 },
  { score: 92, percentile: 90.4 },
  { score: 91, percentile: 90.2 },
  { score: 90, percentile: 88.0 },
  { score: 89, percentile: 87.8 },
  { score: 88, percentile: 87.6 },
  { score: 87, percentile: 87.4 },
  { score: 86, percentile: 87.2 },
  { score: 85, percentile: 87.0 },
  { score: 84, percentile: 86.8 },
  { score: 83, percentile: 86.6 },
  { score: 82, percentile: 86.4 },
  { score: 81, percentile: 86.2 },
  { score: 80, percentile: 85.0 },
  { score: 79, percentile: 84.8 },
  { score: 78, percentile: 84.6 },
  { score: 77, percentile: 84.4 },
  { score: 76, percentile: 84.2 },
  { score: 75, percentile: 84.0 },
  { score: 74, percentile: 83.8 },
  { score: 73, percentile: 83.6 },
  { score: 72, percentile: 83.4 },
  { score: 71, percentile: 83.2 },
  { score: 70, percentile: 80.0 },
  { score: 69, percentile: 79.8 },
  { score: 68, percentile: 79.6 },
  { score: 67, percentile: 79.4 },
  { score: 66, percentile: 79.2 },
  { score: 65, percentile: 79.0 },
  { score: 64, percentile: 78.8 },
  { score: 63, percentile: 78.6 },
  { score: 62, percentile: 78.4 },
  { score: 61, percentile: 78.2 },
  { score: 60, percentile: 70.0 },
  { score: 59, percentile: 69.8 },
  { score: 58, percentile: 69.6 },
  { score: 57, percentile: 69.4 },
  { score: 56, percentile: 69.2 },
  { score: 55, percentile: 69.0 },
  { score: 54, percentile: 68.8 },
  { score: 53, percentile: 68.6 },
  { score: 52, percentile: 68.4 },
  { score: 51, percentile: 68.2 },
  { score: 50, percentile: 60.0 },
  { score: 49, percentile: 59.8 },
  { score: 48, percentile: 59.6 },
  { score: 47, percentile: 59.4 },
  { score: 46, percentile: 59.2 },
  { score: 45, percentile: 59.0 },
  { score: 44, percentile: 58.8 },
  { score: 43, percentile: 58.6 },
  { score: 42, percentile: 58.4 },
  { score: 41, percentile: 58.2 },
  { score: 40, percentile: 58.0 },
  { score: 39, percentile: 57.8 },
  { score: 38, percentile: 57.6 },
  { score: 37, percentile: 57.4 },
  { score: 36, percentile: 57.2 },
  { score: 35, percentile: 57.0 },
  { score: 34, percentile: 56.8 },
  { score: 33, percentile: 56.6 },
  { score: 32, percentile: 56.4 },
  { score: 31, percentile: 56.2 },
  { score: 30, percentile: 56.0 },
  { score: 29, percentile: 55.8 },
  { score: 28, percentile: 55.6 },
  { score: 27, percentile: 55.4 },
  { score: 26, percentile: 55.2 },
  { score: 25, percentile: 55.0 },
  { score: 24, percentile: 54.8 },
  { score: 23, percentile: 54.6 },
  { score: 22, percentile: 54.4 },
  { score: 21, percentile: 54.2 },
  { score: 20, percentile: 54.0 },
  { score: 19, percentile: 53.8 },
  { score: 18, percentile: 53.6 },
  { score: 17, percentile: 53.4 },
  { score: 16, percentile: 53.2 },
  { score: 15, percentile: 53.0 },
  { score: 14, percentile: 52.8 },
  { score: 13, percentile: 52.6 },
  { score: 12, percentile: 52.4 },
  { score: 11, percentile: 52.2 },
  { score: 10, percentile: 52.0 },
  { score: 9, percentile: 51.8 },
  { score: 8, percentile: 51.6 },
  { score: 7, percentile: 51.4 },
  { score: 6, percentile: 51.2 },
  { score: 5, percentile: 51.0 },
  { score: 4, percentile: 50.8 },
  { score: 3, percentile: 50.6 },
  { score: 2, percentile: 50.4 },
  { score: 1, percentile: 50.2 },
  { score: 0, percentile: 0.01 }
];

// Make the function globally available
function getPercentile(score) {
  let result = percentileData.find(p => p.score === score);
  if (!result) {
    for (let i = 0; i < percentileData.length - 1; i++) {
      const a = percentileData[i];
      const b = percentileData[i + 1];
      if (score < a.score && score > b.score) {
        const interpolated = a.percentile + (b.percentile - a.percentile) * ((score - a.score) / (b.score - a.score));
        return interpolated;
      }
    }
    return 0.0;
  }
  return result.percentile;
}

// Make it available in the global scope
window.getPercentile = getPercentile;